# yaml-language-server: $schema=https://schema.blue-build.org/module-v1.json
modules:
  - type: files
    files:
      - source: ../files/system
        destination: /

  - type: gschema-overrides
    include:
      - zz99-samsonite.gschema.override

  - type: dnf
    install:
      packages:
        - cursor
        - incus
        - incus-agent
        - lxc
        - podman-compose
        - podman-tui
        - docker-ce
        - docker-ce-cli
        - containerd.io
        - docker-buildx-plugin
        - docker-compose-plugin
        - code
        - android-tools
        - iotop
        - sysprof
        - trace-cmd
        - bpftop
        - bpftrace
        - cockpit-bridge
        - cockpit-machines
        - cockpit-podman
        - ccache
        - restic
        - rclone
        - zsh
        - python3-ramalama
        - gnome-boxes
        - virt-manager

  - type: systemd
    system:
      enabled:
        - docker.socket
        - podman.socket
        - libvirtd.service
        - bluefin-dx-groups.service
        - incus-workaround.service

  - type: gnome-extensions
    install:
      - 307  # Dash to Dock
      - 7065 # Tiling Shell

  - type: default-flatpaks
    configurations:
      - scope: system
        notify: false
        repo:
          url: https://dl.flathub.org/repo/flathub.flatpakrepo
          name: flathub
          title: Flathub
        install:
          - org.gnome.Decibels
          - org.gnome.Calculator
          - org.gnome.Characters
          - org.gnome.Connections
          - org.gnome.baobab
          - com.ranfdev.DistroShelf
          - org.gnome.Papers
          - com.mattjakeman.ExtensionManager
          - org.mozilla.firefox
          - org.gnome.Firmware
          - org.gnome.FileRoller
          - com.github.tchx84.Flatseal
          - org.gnome.font-viewer
          - io.github.flattool.Ignition
          - org.gnome.Loupe
          - io.gitlab.adhami3310.Impression
          - org.gnome.Logs
          - io.missioncenter.MissionCenter
          - org.gnome.TextEditor
          - org.gnome.Showtime
          - io.github.flattool.Warehouse

  - type: signing

  - type: script
    scripts:
      - build-dconf.sh
      - inject-gearlever.sh
